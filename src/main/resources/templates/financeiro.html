<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financeiro - Fut360</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" th:href="@{/css/financeiro_style.css}">
</head>
<body>

<div class="dashboard-container">
    <aside class="sidebar">
        <div class="sidebar-header">
            <img th:src="@{/images/logo_fut_360.png}" alt="Logo Fut360" class="sidebar-logo">
            <h1 class="sidebar-title">Fut360</h1>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li><a th:href="@{/dashboard}"><i class='bx bxs-dashboard'></i><span>Dashboard</span></a></li>
                <li class="active"><a th:href="@{/financeiro}"><i class='bx bx-dollar-circle'></i><span>Financeiro</span></a></li>
                <li><a th:href="@{/calendario}"><i class='bx bx-calendar'></i><span>Calendário</span></a></li>
                <li><a th:href="@{/atletas}"><i class='bx bx-run'></i><span>Atletas</span></a></li>
                <li><a th:href="@{/relatorios}"><i class='bx bxs-report'></i><span>Relatórios</span></a></li>
            </ul>
        </nav>

    </aside>

    <main class="main-content">
        <header class="header">
            <div class="header-title">
                <h2>Gestão Financeira</h2>
                <p>Controle completo do clube</p>
            </div>
            <div class="user-info">
                <span>Usuário</span>
                <div class="user-avatar">U</div>
                <button class="logout-btn"><i class='bx bx-log-out'></i></button>
            </div>
        </header>

        <div class="view-navigation" style="margin-bottom: 20px; display: flex; gap: 10px;">
            <button id="btn-tab-cashflow" class="btn-primary" onclick="mudarAba('cashflow')">Fluxo de Caixa</button>
            <button id="btn-tab-payroll" class="btn-secondary" onclick="mudarAba('payroll')">Folha Salarial</button>
            <button id="btn-tab-contracts" class="btn-secondary" onclick="mudarAba('contracts')">Contratos</button>
        </div>

        <section id="cashflow-view">
            <div class="summary-cards">
                <div class="card">
                    <div class="card-header"><i class='bx bx-trending-up'></i><span>Receitas</span></div>
                    <p class="financial-value positive" id="receitas-total">R$ 0,00</p>
                </div>
                <div class="card">
                    <div class="card-header"><i class='bx bx-trending-down'></i><span>Despesas</span></div>
                    <p class="financial-value negative" id="despesas-total">R$ 0,00</p>
                </div>
                <div class="card">
                    <div class="card-header"><i class='bx bx-bar-chart-alt-2'></i><span>Balanço</span></div>
                    <p class="financial-value positive" id="balanco-total">R$ 0,00</p>
                </div>
            </div>

            <div class="transactions-section">
                <div class="transactions-header">
                    <h3>Histórico de Transações</h3>
                    <button class="btn-primary" id="add-transaction-btn"><i class='bx bx-plus'></i> Nova Transação</button>
                </div>
                <table class="transactions-table">
                    <thead>
                    <tr>
                        <th>Data</th>
                        <th>Descrição</th>
                        <th>Categoria</th>
                        <th>Tipo</th>
                        <th>Valor</th>
                        <th>Ações</th>
                    </tr>
                    </thead>
                    <tbody id="transactions-body"></tbody>
                </table>
            </div>

            <div id="transaction-modal" class="modal-overlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Nova Transação</h2>
                        <button class="close-button" id="close-modal-btn"><i class='bx bx-x'></i></button>
                    </div>
                    <form id="transaction-form">
                        <div class="form-group"><label>Tipo</label>
                            <select id="input-tipo" required><option value="receita">Receita</option><option value="despesa">Despesa</option></select>
                        </div>
                        <div class="form-group"><label>Descrição</label><input type="text" id="input-descricao" required></div>
                        <div class="form-group"><label>Valor (R$)</label><input type="number" id="input-valor" required min="0.01" step="0.01"></div>
                        <div class="form-group"><label>Data</label><input type="date" id="input-data" required></div>
                        <div class="form-group"><label>Categoria</label><input type="text" id="input-categoria" required></div>
                        <div class="form-group"><label>Responsável</label><input type="text" id="input-responsavel" required></div>
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" id="cancel-btn">Cancelar</button>
                            <button type="submit" class="btn-primary" id="save-btn">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="payroll-view" style="display: none;">
            <div class="summary-cards">
                <div class="card">
                    <div class="card-header"><span>Custo Mensal (Pago + Pendente)</span></div>
                    <p class="financial-value negative" id="payroll-total">R$ 0,00</p>
                </div>
                <div class="card">
                    <div class="card-header"><span>Total Pendente</span></div>
                    <p class="financial-value" style="color: orange" id="payroll-pending">R$ 0,00</p>
                </div>
            </div>

            <div class="transactions-section">
                <div class="transactions-header">
                    <h3>Folha de Pagamento</h3>
                    <button class="btn-primary" onclick="abrirModalPayroll()"><i class='bx bx-plus'></i> Registrar Pagamento</button>
                </div>
                <table class="transactions-table">
                    <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Cargo</th>
                        <th>Valor</th>
                        <th>Data Pgto</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                    </thead>
                    <tbody id="payroll-body"></tbody>
                </table>
            </div>

            <div id="payroll-modal" class="modal-overlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Registrar Pagamento</h2>
                        <button class="close-button" onclick="fecharModalPayroll()"><i class='bx bx-x'></i></button>
                    </div>
                    <form id="payroll-form">
                        <div class="form-group"><label>Nome</label><input type="text" id="pay-name" required></div>
                        <div class="form-group"><label>Cargo</label><input type="text" id="pay-role" required></div>
                        <div class="form-group"><label>Valor (R$)</label><input type="number" id="pay-value" step="0.01" required></div>
                        <div class="form-group"><label>Data</label><input type="date" id="pay-date" required></div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="pay-status">
                                <option value="pendente">Pendente</option>
                                <option value="pago">Pago</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="fecharModalPayroll()">Cancelar</button>
                            <button type="submit" class="btn-primary">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="contracts-view" style="display: none;">
            <div class="transactions-section">
                <div class="transactions-header">
                    <h3>Contratos de Atletas</h3>
                    <button class="btn-primary" onclick="abrirModalContract()"><i class='bx bx-plus'></i> Novo Contrato</button>
                </div>

                <table class="transactions-table">
                    <thead>
                    <tr>
                        <th>Nome Atleta</th>
                        <th>Posição</th>
                        <th>Salário</th>
                        <th>Início</th>
                        <th>Fim</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                    </thead>
                    <tbody id="contracts-body"></tbody>
                </table>
            </div>

            <div id="contract-modal" class="modal-overlay">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Novo Contrato</h2>
                        <button class="close-button" onclick="fecharModalContract()"><i class='bx bx-x'></i></button>
                    </div>
                    <form id="contract-form">
                        <div class="form-group">
                            <label for="cont-nome">Nome do Atleta</label>
                            <input type="text" id="cont-nome" required placeholder="Ex: Neymar">
                        </div>

                        <div class="form-group">
                            <label for="cont-idade">Idade</label>
                            <input type="number" id="cont-idade" required min="16" max="100">
                        </div>

                        <div class="form-group">
                            <label for="cont-posicao">Posição</label>
                            <input type="text" id="cont-posicao" required placeholder="Ex: Atacante">
                        </div>

                        <div class="form-group">
                            <label for="cont-salary">Salário (R$)</label>
                            <input type="number" id="cont-salary" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label for="cont-start">Data Início</label>
                            <input type="date" id="cont-start" required>
                        </div>

                        <div class="form-group">
                            <label for="cont-end">Data Fim</label>
                            <input type="date" id="cont-end" required>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="fecharModalContract()">Cancelar</button>
                            <button type="submit" class="btn-primary">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

    </main>
</div>

<script th:src="@{/js/financeiro.js}"></script>
</body>
</html>